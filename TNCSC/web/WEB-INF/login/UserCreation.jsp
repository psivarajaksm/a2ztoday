<%@ taglib uri="/WEB-INF/struts-html.tld" prefix="html"%><%@ taglib uri="/WEB-INF/struts-bean.tld" prefix="bean"%><%@ taglib uri="/WEB-INF/struts-logic.tld" prefix="logic"%><%@ page contentType="text/html"%><%@ page pageEncoding="UTF-8"%><%@ page import="com.onward.util.AppProps"%><%@ page import="com.onward.common.ApplicationConstants"%><%    String staticPath = AppProps.getInstance().getProperty(ApplicationConstants.STATIC_IP_PATH);%><!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"    "http://www.w3.org/TR/html4/loose.dtd"><%    String path = request.getContextPath();    String message = "";    if ((request.getAttribute("message") != null)) {        message = (String) request.getAttribute("message");    }    request.removeAttribute("message");%><html>    <head>        <script src="<%=staticPath%>scripts/cal.js"></script>        <script src="dwr/interface/UserAction.js"></script>        <script src="dwr/engine.js"></script>        <script src="dwr/util.js"></script>        <script>                        function saveUserCreationDetails(){                var secretquestionone = document.forms[0].secretquestionone.value;                var youranswerone = document.forms[0].youranswerone.value;                var secretquestiontwo = document.forms[0].secretquestiontwo.value;                var youranswertwo = document.forms[0].youranswertwo.value;                var regionid = document.forms[0].regionid.value;                                if(secretquestionone==null || secretquestionone==""){                    alert("<bean:message key="al_1" />");  return false;                } else if(youranswerone==null || youranswerone==""){                    alert("<bean:message key="al_2" />");  return false;                } else if(secretquestiontwo==null || secretquestiontwo==""){                    alert("<bean:message key="al_3" />");  return false;                } else if(youranswertwo==null || youranswertwo==""){                    alert("<bean:message key="al_4" />");  return false;                } else if(regionid=='0'){                    alert("Select the region");  return false;                }                var answer = confirm("Do You Want to Continue?");                if (answer){                    getBlanket('continueDIV');                    document.forms[0].action="UserAction.htm";                    document.forms[0].method.value="saveUserCreationDetails";                    document.forms[0].submit();                }            }            function confirmPasswordCheck(obj){                if(obj.value!=document.forms[0].password.value){                    alert("<bean:message key="al_5" />");                    obj.value="";                    return false;                }                return true;            }        </script>        <script>            function isUserIdExist(obj){                var userid = obj.value;                var regionid=document.getElementById('regionid').value;                if(userid.length < 4){                    alert("Your user id must be atleast 4 Characters in length");                    obj.value = "";                    return false;                }                UserAction.isUserIdExist(userid,regionid,function setAccountValues(map){                    if(map==null || map=="" || map.length<=0){                        alert("<bean:message key="al_6" />");                        document.forms[0].userid.value = "";                                                return false;                    } else{                        if(map.ERROR!=null && map.ERROR!=""){                            alert(map.ERROR);                            document.forms[0].userid.value = "";                                                        return false;                        } else {                            dwr.util.setValues(map);                        }                    }                });            }            function getCurType(obj){                document.forms[0].currencytype.value = obj.id;            }            function NextEnableDiv(flag){                if(flag=='SECURITY_DIV'){                    var username = document.forms[0].username.value;                    var dateofbirth = document.forms[0].dateofbirth.value;                    var emailid = document.forms[0].emailid.value;                    var mobilenumber = document.forms[0].mobilenumber.value;                    var address = document.forms[0].address.value;                    var userid = document.forms[0].userid.value;                    var password = document.forms[0].password.value;                    var confirmpassword = document.forms[0].confirmpassword.value;                    var regionid = document.forms[0].regionid.value;                    if(regionid=='0'){                        alert("Select the region");  return false;                    } else if(username==null || username==""){                        alert("<bean:message key="al_8" />");  return false;                    } else if(dateofbirth==null || dateofbirth==""){                        alert("<bean:message key="al_9" />");  return false;                    } else if(emailid==null || emailid==""){                        alert("<bean:message key="al_10" />");  return false;                    } else if(mobilenumber==null || mobilenumber==""){                        alert("<bean:message key="al_11" />");  return false;                    } else if(address==null || address==""){                        alert("<bean:message key="al_12" />");  return false;                    } else if(userid==null || userid==""){                        alert("<bean:message key="al_18" />");  return false;                    } else if(password==null || password==""){                        alert("<bean:message key="al_19" />");  return false;                    } else if(confirmpassword==null || confirmpassword==""){                        alert("<bean:message key="al_20" />");  return false;                    }                    else if(confirmpassword!=password){                        alert("<bean:message key="al_5" />");   return false;                    }                }                                 document.getElementById("PERSONAL_DIV").style.display = 'none';                document.getElementById("SECURITY_DIV").style.display = 'none';                document.getElementById(flag).style.display = '';            }                   </script>    </head>    <body topmargin="0" marginheight="0" leftmargin="0" marginleft="0" valign="center">        <div id="blanket" style="display:none;"></div>        <div id="continueDIV" style="display:none;" align="center" class="loadingRequest">            <img src="<%=staticPath%>images/loading_1.gif" align="middle" border="0"><br /><bean:message key="reqinprogress" />        </div>        <form method="post">            <div id="header">                <%@ include file="/common/header.jsp" %>            </div>            <div id="left-sidebar">                <%@ include file="/common/leftpage.jsp" %>            </div>            <div id="content">                <table id="commonBodyTable" border="0" cellspacing="0" cellpadding="0" align="center">                    <tr>                        <td>                            <table width="100%" align="center" border="0" cellpadding="0" cellspacing="0">                                <tr>                                    <td width="100%" align="center" class="headerdata"><bean:message key="personalprofile" /></td>                                </tr>                            </table>                            <table width="85%" id="PERSONAL_DIV" class="tableBorder1" style="display:none;" align="center" border="0" cellpadding="0" cellspacing="0">                                <tr>                                    <td width="100%" colspan="3" align="left" class="headerdata1"><bean:message key="personaldet" /></td>                                </tr>                                <tr class="darkrow">                                    <td width="35%" class="textalign">Region</td>                                    <td width="5%" class="mandatory">*</td>                                    <td width="60%" colspan="4" class="textfieldalign" >                                        <select class="combobox" name="regionid" id="regionid" class="textfieldalign" ></select>                                    </td>                                </tr>                                <tr class="lightrow">                                    <td width="35%" class="textalign"><bean:message key="title" /></td>                                    <td width="5%" class="mandatory">*</td>                                    <td width="60%" class="textfieldalign"><select class="combobox" name="salutationtype" id="salutationtype"></select></td>                                </tr>                                                                <tr class="darkrow">                                    <td width="35%" class="textalign"><bean:message key="gender" /></td>                                    <td width="5%" class="mandatory">*</td>                                    <td width="60%" class="textfieldalign"><select class="combobox" name="gender" id="gender"></select></td>                                </tr>                                  <tr class="lightrow">                                    <td width="35%" class="textalign"><bean:message key="firstname" /></td>                                    <td width="5%" class="mandatory">*</td>                                    <td width="60%" class="textfieldalign"><input type="text" class="textbox3" name="username" id="username" maxlength="50"></td>                                </tr>                                <tr class="darkrow">                                    <td width="35%" class="textalign"><bean:message key="dob" /></td>                                    <td width="5%" class="mandatory">*</td>                                    <td width="60%" class="textfieldalign">                                        <input type="text" class="datetextbox" name="dateofbirth" id="dateofbirth" maxlength="10" onkeyup="formatDate(this);" onblur="isValidDate(this); minorValidateDate(this);">                                        <img src="<%=staticPath%>images/calpicker.png" name="dateofbirthimage" id="dateofbirthimage" border="0" width="20" height="19" align="top" onClick="scwShow(document.getElementById('dateofbirth'),event,'dateofbirth');return false;">&nbsp;[dd/mm/yyyy]                                    </td>                                </tr>                                <tr class="lightrow">                                    <td width="35%" class="textalign"><bean:message key="email" /></td>                                    <td width="5%" class="mandatory">*</td>                                    <td width="60%" class="textfieldalign"><input type="text" class="textbox3" name="emailid" id="emailid" maxlength="50" onblur="validateEmailid(this);"></td>                                </tr>                                <tr class="darkrow">                                    <td width="35%" class="textalign"><bean:message key="phonenumber" /></td>                                    <td width="5%" class="mandatory">*</td>                                    <td width="60%" class="textfieldalign"><input type="text" class="textbox" name="mobilenumber" id="mobilenumber" maxlength="15" onblur="isNumber(this);" ></td>                                </tr>                                <tr class="lightrow">                                    <td width="35%" class="textalign"><bean:message key="address" /></td>                                    <td width="5%" class="mandatory">*</td>                                    <td width="60%" class="textfieldalign"><input type="text" class="textbox3" name="address" id="address" maxlength="1000"></td>                                </tr>                                <tr class="darkrow" style="display:none;">                                    <td width="35%" class="textalign"><bean:message key="pincode" /></td>                                    <td width="5%" class="mandatory">*</td>                                    <td width="60%" class="textfieldalign"><input type="text" class="textbox" name="pincode" id="pincode" maxlength="10" onblur="isNumber(this);" ></td>                                </tr>                                <tr class="lightrow" style="display:none;">                                    <td width="35%" class="textalign"><bean:message key="country" /></td>                                    <td width="5%" class="mandatory">*</td>                                    <td width="60%" class="textfieldalign"><select class="combobox1" name="country" id="country"></select></td>                                </tr>                                <tr class="darkrow" style="display:none;">                                    <td width="35%" class="textalign"><bean:message key="state" /></td>                                    <td width="5%" class="mandatory">*</td>                                    <td width="60%" class="textfieldalign"><select class="combobox1" name="state" id="state"></select></td>                                </tr>                                <tr class="lightrow" style="display:none;">                                    <td width="35%" class="textalign"><bean:message key="city" /></td>                                    <td width="5%" class="mandatory">*</td>                                    <td width="60%" class="textfieldalign"><input type="text" class="textbox" name="city" id="city" maxlength="10"></td>                                </tr>                                <tr class="darkrow">                                    <td width="35%" class="textalign"><bean:message key="userid" /></td>                                    <td width="5%" class="mandatory">*</td>                                    <td width="60%" class="textfieldalign"><input type="text" class="textbox" name="userid" id="userid" onkeyup="userIdClearText(this);" onblur="isUserIdExist(this)"></td>                                </tr>                                <tr class="lightrow">                                    <td width="35%" class="textalign"><bean:message key="password" /></td>                                    <td width="5%" class="mandatory">*</td>                                    <td width="60%" class="textfieldalign">                                        <input type="password" class="textbox" name="password" id="password" onkeyup="updatestrength(this.value);" maxlength="15" onblur="passwordCheck(this);">&nbsp;&nbsp;&nbsp;                                        <img src="<%=staticPath%>images/tooshort.png" name="strength" id="strength" style="vertical-align:middle;" border="0" width="190" height="25" />                                    </td>                                </tr>                                <tr class="darkrow">                                    <td width="35%" class="textalign"><bean:message key="confirmpassword" /></td>                                    <td width="5%" class="mandatory">*</td>                                    <td width="60%" class="textfieldalign"><input type="password" CLASS="textbox" maxlength="15" name="confirmpassword" id="confirmpassword" maxlength="15" onblur="confirmPasswordCheck(this);"></td>                                </tr>                                <tr class="lightrow">                                    <td width="35%" class="textalign">&nbsp;</td>                                    <td width="5%" class="mandatory">&nbsp;</td>                                    <td width="60%" class="textfieldalign">                                        <input type="button" class="submitbu" name="next_first_div" id="next_first_div" value="Continue" onclick="NextEnableDiv('SECURITY_DIV')">                                    </td>                                </tr>                            </table>                            <table width="85%" id="SECURITY_DIV" class="tableBorder1" style="display:none;" align="center" border="0" cellpadding="0" cellspacing="0">                                <tr class="darkrow">                                    <td width="100%" colspan="3" align="left" class="headerdata1"><bean:message key="secdet" /></td>                                </tr>                                <tr class="lightrow">                                    <td width="35%" class="textalign"><bean:message key="secque1" /></td>                                    <td width="5%" class="mandatory">*</td>                                    <td width="60%" class="textfieldalign"><select class="combobox1" name="secretquestionone" id="secretquestionone"></select></td>                                </tr>                                <tr class="darkrow">                                    <td width="35%" class="textalign"><bean:message key="answer" /></td>                                    <td width="5%" class="mandatory">*</td>                                    <td width="60%" class="textfieldalign"><input type="text" class="textbox3" name="youranswerone" id="youranswerone" maxlength="50"></td>                                </tr>                                <tr class="lightrow">                                    <td width="35%" class="textalign"><bean:message key="secque2" /></td>                                    <td width="5%" class="mandatory">*</td>                                    <td width="60%" class="textfieldalign"><select class="combobox1" name="secretquestiontwo" id="secretquestiontwo"></select></td>                                </tr>                                <tr class="darkrow">                                    <td width="35%" class="textalign"><bean:message key="answer" /></td>                                    <td width="5%" class="mandatory">*</td>                                    <td width="60%" class="textfieldalign"><input type="text" class="textbox3" name="youranswertwo" id="youranswertwo" maxlength="50"></td>                                </tr>                                <tr class="lightrow">                                    <td width="35%" class="textalign">&nbsp;</td>                                    <td width="5%" class="mandatory">&nbsp;</td>                                    <td width="60%" class="textfieldalign">                                        <input type="button" CLASS="submitbu" name="previous_third_div" id="previous_third_div" value="Previous" onclick="NextEnableDiv('PERSONAL_DIV')">                                        <input type="button" CLASS="submitbu" name="save" id="save" value="Submit" onclick="saveUserCreationDetails()">                                    </td>                                </tr>                            </table>                        </td>                    </tr>                </table>            </div>            <div id="footer">                <%@ include file="/common/footer.jsp" %>            </div>                        <input type="hidden" name="method">            <input type="hidden" name="currencytype" id="currencytype">            <input type="hidden" name="todaydate" id="todaydate" value="<%=AppProps.getInstance().getToDayDate()%>" maxlength="10">        </form>    </body>    <script>                bodyOnload();        function bodyOnload(){            var message = '<%=message%>';            if(message!=null && message!=""){                alert(message);            }            document.getElementById("PERSONAL_DIV").style.display = '';                        /*var displayid = "salutationtype,country,state,secretquestionone,secretquestiontwo,gender,usertype";            var parentcodes = "1,3,4,7,8,2,9" ;*/            var displayid = "salutationtype,secretquestionone,secretquestiontwo,gender";            var parentcodes = "1,7,8,2" ;            UserAction.loadRegionDetails(fillRegionValues);            UserAction.loadApplicationReferenceCodes(displayid,parentcodes,fillComboBoxValues);                    }        function fillRegionValues(map){            dwr.util.removeAllOptions("regionid");            dwr.util.addOptions("regionid",map.regionlist);                    }        function fillComboBoxValues(map){            dwr.util.removeAllOptions("salutationtype");            dwr.util.addOptions("salutationtype",map.salutationtype);            /*dwr.util.removeAllOptions("country");            dwr.util.addOptions("country",map.country);            dwr.util.removeAllOptions("state");            dwr.util.addOptions("state",map.state);*/            dwr.util.removeAllOptions("secretquestionone");            dwr.util.addOptions("secretquestionone",map.secretquestionone);            dwr.util.removeAllOptions("secretquestiontwo");            dwr.util.addOptions("secretquestiontwo",map.secretquestiontwo);            dwr.util.removeAllOptions("gender");            dwr.util.addOptions("gender",map.gender);        }    </script></html>